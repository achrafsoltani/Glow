<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 500" width="750" height="500">
  <defs>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#5CB85C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#449D44;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="x11Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F0AD4E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EC971F;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="pulseGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#00ADD8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0095BD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="socketGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#D9534F;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C9302C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9B59B6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8E44AD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hwGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#34495E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2C3E50;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="750" height="500" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="375" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Complete Glow Architecture</text>

  <!-- Public API Layer -->
  <g filter="url(#shadow)">
    <rect x="40" y="50" width="670" height="70" rx="8" fill="url(#apiGrad)"/>
  </g>
  <text x="375" y="75" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Public API (glow.go, audio.go, events.go)</text>

  <!-- API components -->
  <g transform="translate(60, 88)">
    <rect x="0" y="0" width="80" height="22" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="40" y="15" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="white">Window</text>

    <rect x="88" y="0" width="80" height="22" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="128" y="15" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="white">Canvas</text>

    <rect x="176" y="0" width="65" height="22" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="208" y="15" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="white">Color</text>

    <rect x="249" y="0" width="65" height="22" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="281" y="15" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="white">Event</text>

    <rect x="322" y="0" width="110" height="22" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="377" y="15" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="white">AudioContext</text>

    <rect x="440" y="0" width="105" height="22" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="492" y="15" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="white">AudioPlayer</text>

    <rect x="553" y="0" width="90" height="22" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="598" y="15" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="white">PollEvent</text>
  </g>

  <!-- Arrows down -->
  <line x1="235" y1="120" x2="235" y2="148" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="515" y1="120" x2="515" y2="148" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Internal Layers -->
  <!-- X11 Internal -->
  <g filter="url(#shadow)">
    <rect x="40" y="155" width="390" height="70" rx="8" fill="url(#x11Grad)"/>
  </g>
  <text x="235" y="178" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">internal/x11/</text>
  <g transform="translate(55, 188)">
    <rect x="0" y="0" width="55" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="27" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">conn</text>
    <rect x="60" y="0" width="60" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="90" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">window</text>
    <rect x="125" y="0" width="50" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="150" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">event</text>
    <rect x="180" y="0" width="50" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="205" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">draw</text>
    <rect x="235" y="0" width="55" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="262" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">fb</text>
    <rect x="295" y="0" width="50" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="320" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">auth</text>
    <rect x="350" y="0" width="55" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="377" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">atoms</text>
  </g>

  <!-- Pulse Internal -->
  <g filter="url(#shadow)">
    <rect x="450" y="155" width="260" height="70" rx="8" fill="url(#pulseGrad)"/>
  </g>
  <text x="580" y="178" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">internal/pulse/</text>
  <g transform="translate(465, 188)">
    <rect x="0" y="0" width="55" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="27" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">conn</text>
    <rect x="60" y="0" width="65" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="92" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">stream</text>
    <rect x="130" y="0" width="70" height="20" rx="3" fill="rgba(0,0,0,0.2)"/>
    <text x="165" y="14" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="white">protocol</text>
  </g>

  <!-- Arrows down -->
  <line x1="235" y1="225" x2="235" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="580" y1="225" x2="580" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Unix Sockets -->
  <g filter="url(#shadow)">
    <rect x="40" y="257" width="390" height="45" rx="8" fill="url(#socketGrad)"/>
  </g>
  <text x="235" y="278" font-family="Consolas, monospace" font-size="11" text-anchor="middle" fill="white">/tmp/.X11-unix/X0</text>
  <text x="235" y="293" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">Unix socket (little-endian)</text>

  <g filter="url(#shadow)">
    <rect x="450" y="257" width="260" height="45" rx="8" fill="url(#socketGrad)"/>
  </g>
  <text x="580" y="278" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">$XDG_RUNTIME_DIR/pulse/native</text>
  <text x="580" y="293" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">Unix socket (big-endian)</text>

  <!-- Arrows down -->
  <line x1="235" y1="302" x2="235" y2="325" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="580" y1="302" x2="580" y2="325" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Servers -->
  <g filter="url(#shadow)">
    <rect x="40" y="330" width="390" height="45" rx="8" fill="url(#serverGrad)"/>
  </g>
  <text x="235" y="358" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">X11 Server (Xorg / XWayland)</text>

  <g filter="url(#shadow)">
    <rect x="450" y="330" width="260" height="45" rx="8" fill="url(#serverGrad)"/>
  </g>
  <text x="580" y="358" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">PA / PipeWire</text>

  <!-- Arrows down -->
  <line x1="235" y1="375" x2="235" y2="398" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="580" y1="375" x2="580" y2="398" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Hardware -->
  <g filter="url(#shadow)">
    <rect x="40" y="403" width="390" height="40" rx="8" fill="url(#hwGrad)"/>
  </g>
  <text x="235" y="428" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Display (GPU, Monitor)</text>

  <g filter="url(#shadow)">
    <rect x="450" y="403" width="260" height="40" rx="8" fill="url(#hwGrad)"/>
  </g>
  <text x="580" y="428" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Speakers (ALSA)</text>

  <!-- Bottom summary -->
  <g transform="translate(40, 460)">
    <rect x="0" y="0" width="670" height="28" rx="5" fill="#D5F5E3" stroke="#27AE60"/>
    <text x="335" y="19" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#1E8449">Pure Go, zero dependencies â€” binary protocols over Unix sockets for both graphics and audio</text>
  </g>
</svg>
