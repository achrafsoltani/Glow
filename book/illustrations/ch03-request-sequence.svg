<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 320" width="600" height="320">
  <defs>
    <marker id="arrowRight" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#3498DB"/>
    </marker>
    <marker id="arrowLeft" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto">
      <path d="M9,0 L9,6 L0,3 z" fill="#27AE60"/>
    </marker>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
  </defs>

  <rect width="600" height="320" fill="#FAFAFA"/>

  <text x="300" y="25" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">X11 Request/Event Sequence</text>

  <!-- Client column -->
  <rect x="80" y="45" width="100" height="30" rx="4" fill="#3498DB" filter="url(#shadow)"/>
  <text x="130" y="65" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Client</text>
  <line x1="130" y1="75" x2="130" y2="300" stroke="#3498DB" stroke-width="2"/>

  <!-- Server column -->
  <rect x="420" y="45" width="100" height="30" rx="4" fill="#27AE60" filter="url(#shadow)"/>
  <text x="470" y="65" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Server</text>
  <line x1="470" y1="75" x2="470" y2="300" stroke="#27AE60" stroke-width="2"/>

  <!-- CreateWindow Request -->
  <line x1="135" y1="95" x2="460" y2="95" stroke="#3498DB" stroke-width="2" marker-end="url(#arrowRight)"/>
  <text x="300" y="90" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="#2C3E50">CreateWindow Request</text>
  <text x="520" y="100" font-family="Arial, sans-serif" font-size="9" fill="#666">(creates window)</text>

  <!-- MapWindow Request -->
  <line x1="135" y1="135" x2="460" y2="135" stroke="#3498DB" stroke-width="2" marker-end="url(#arrowRight)"/>
  <text x="300" y="130" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="#2C3E50">MapWindow Request</text>
  <text x="520" y="140" font-family="Arial, sans-serif" font-size="9" fill="#666">(makes visible)</text>

  <!-- Expose Event -->
  <line x1="465" y1="175" x2="140" y2="175" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowLeft)"/>
  <text x="300" y="170" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="#1E8449">Expose Event</text>
  <text x="520" y="180" font-family="Arial, sans-serif" font-size="9" fill="#666">(needs redraw)</text>

  <!-- PutImage Request -->
  <line x1="135" y1="215" x2="460" y2="215" stroke="#3498DB" stroke-width="2" marker-end="url(#arrowRight)"/>
  <text x="300" y="210" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="#2C3E50">PutImage Request</text>
  <text x="520" y="220" font-family="Arial, sans-serif" font-size="9" fill="#666">(draws pixels)</text>

  <!-- KeyPress Event -->
  <line x1="465" y1="255" x2="140" y2="255" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowLeft)"/>
  <text x="300" y="250" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="#1E8449">KeyPress Event</text>
  <text x="520" y="260" font-family="Arial, sans-serif" font-size="9" fill="#666">(user types)</text>

  <!-- Legend -->
  <rect x="180" y="280" width="240" height="30" rx="4" fill="#ECF0F1" stroke="#BDC3C7"/>
  <line x1="200" y1="295" x2="240" y2="295" stroke="#3498DB" stroke-width="2" marker-end="url(#arrowRight)"/>
  <text x="250" y="299" font-family="Arial, sans-serif" font-size="9" fill="#333">Request</text>
  <line x1="320" y1="295" x2="360" y2="295" stroke="#27AE60" stroke-width="2" marker-end="url(#arrowLeft)"/>
  <text x="370" y="299" font-family="Arial, sans-serif" font-size="9" fill="#333">Event</text>
</svg>
