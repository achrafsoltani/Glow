<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 320" width="700" height="320">
  <defs>
    <linearGradient id="opcodeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E74C3C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C0392B;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="lengthGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498DB;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980B9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27AE60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E8449;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="padGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#95A5A6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7F8C8D;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="700" height="320" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="350" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">X11 Request Structure (MapWindow Example)</text>

  <!-- Byte array visualization -->
  <g transform="translate(75, 60)">
    <!-- Index labels -->
    <g font-family="Consolas, monospace" font-size="11" fill="#666">
      <text x="34" y="-5" text-anchor="middle">[0]</text>
      <text x="102" y="-5" text-anchor="middle">[1]</text>
      <text x="170" y="-5" text-anchor="middle">[2]</text>
      <text x="238" y="-5" text-anchor="middle">[3]</text>
      <text x="306" y="-5" text-anchor="middle">[4]</text>
      <text x="374" y="-5" text-anchor="middle">[5]</text>
      <text x="442" y="-5" text-anchor="middle">[6]</text>
      <text x="510" y="-5" text-anchor="middle">[7]</text>
    </g>

    <!-- Byte boxes -->
    <g filter="url(#shadow)">
      <!-- Opcode -->
      <rect x="0" y="0" width="68" height="60" rx="4" fill="url(#opcodeGrad)"/>
      <text x="34" y="35" font-family="Consolas, monospace" font-size="14" font-weight="bold" text-anchor="middle" fill="white">08</text>
      <text x="34" y="52" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">opcode</text>

      <!-- Unused -->
      <rect x="68" y="0" width="68" height="60" rx="4" fill="url(#padGrad)"/>
      <text x="102" y="35" font-family="Consolas, monospace" font-size="14" font-weight="bold" text-anchor="middle" fill="white">00</text>
      <text x="102" y="52" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">unused</text>

      <!-- Length (2 bytes) -->
      <rect x="136" y="0" width="136" height="60" rx="4" fill="url(#lengthGrad)"/>
      <text x="204" y="28" font-family="Consolas, monospace" font-size="14" font-weight="bold" text-anchor="middle" fill="white">02 00</text>
      <text x="204" y="52" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">length (uint16)</text>

      <!-- Window ID (4 bytes) -->
      <rect x="272" y="0" width="272" height="60" rx="4" fill="url(#dataGrad)"/>
      <text x="408" y="28" font-family="Consolas, monospace" font-size="14" font-weight="bold" text-anchor="middle" fill="white">01 00 00 60</text>
      <text x="408" y="52" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">window ID (uint32)</text>
    </g>
  </g>

  <!-- Code showing how to build this -->
  <g transform="translate(75, 150)">
    <rect x="0" y="0" width="550" height="120" rx="8" fill="#2C3E50" filter="url(#shadow)"/>
    <text x="15" y="20" font-family="Consolas, monospace" font-size="11" fill="#E74C3C">// Building an X11 request in Go</text>
    <text x="15" y="38" font-family="Consolas, monospace" font-size="11" fill="#F1C40F">req</text>
    <text x="38" y="38" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1"> := </text>
    <text x="60" y="38" font-family="Consolas, monospace" font-size="11" fill="#3498DB">make</text>
    <text x="93" y="38" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">([]</text>
    <text x="110" y="38" font-family="Consolas, monospace" font-size="11" fill="#3498DB">byte</text>
    <text x="142" y="38" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">, </text>
    <text x="152" y="38" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">8</text>
    <text x="160" y="38" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">)</text>

    <text x="15" y="56" font-family="Consolas, monospace" font-size="11" fill="#F1C40F">req</text>
    <text x="38" y="56" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">[</text>
    <text x="45" y="56" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">0</text>
    <text x="52" y="56" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">] = </text>
    <text x="80" y="56" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">8</text>
    <text x="140" y="56" font-family="Consolas, monospace" font-size="11" fill="#7F8C8D">// Opcode: MapWindow</text>

    <text x="15" y="74" font-family="Consolas, monospace" font-size="11" fill="#F1C40F">req</text>
    <text x="38" y="74" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">[</text>
    <text x="45" y="74" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">1</text>
    <text x="52" y="74" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">] = </text>
    <text x="80" y="74" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">0</text>
    <text x="140" y="74" font-family="Consolas, monospace" font-size="11" fill="#7F8C8D">// Unused</text>

    <text x="15" y="92" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">binary.LittleEndian.</text>
    <text x="165" y="92" font-family="Consolas, monospace" font-size="11" fill="#3498DB">PutUint16</text>
    <text x="243" y="92" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">(req[</text>
    <text x="275" y="92" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">2</text>
    <text x="282" y="92" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">:], </text>
    <text x="305" y="92" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">2</text>
    <text x="312" y="92" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">)</text>
    <text x="340" y="92" font-family="Consolas, monospace" font-size="11" fill="#7F8C8D">// Length: 2 words</text>

    <text x="15" y="110" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">binary.LittleEndian.</text>
    <text x="165" y="110" font-family="Consolas, monospace" font-size="11" fill="#3498DB">PutUint32</text>
    <text x="243" y="110" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">(req[</text>
    <text x="275" y="110" font-family="Consolas, monospace" font-size="11" fill="#9B59B6">4</text>
    <text x="282" y="110" font-family="Consolas, monospace" font-size="11" fill="#ECF0F1">:], windowID)</text>
  </g>

  <!-- Legend -->
  <g transform="translate(75, 285)">
    <rect x="0" y="0" width="20" height="15" rx="2" fill="url(#opcodeGrad)"/>
    <text x="25" y="12" font-family="Arial, sans-serif" font-size="10" fill="#666">Opcode (1 byte)</text>

    <rect x="130" y="0" width="20" height="15" rx="2" fill="url(#lengthGrad)"/>
    <text x="155" y="12" font-family="Arial, sans-serif" font-size="10" fill="#666">Length (2 bytes)</text>

    <rect x="270" y="0" width="20" height="15" rx="2" fill="url(#dataGrad)"/>
    <text x="295" y="12" font-family="Arial, sans-serif" font-size="10" fill="#666">Data (4 bytes)</text>

    <rect x="400" y="0" width="20" height="15" rx="2" fill="url(#padGrad)"/>
    <text x="425" y="12" font-family="Arial, sans-serif" font-size="10" fill="#666">Unused/Padding</text>
  </g>
</svg>