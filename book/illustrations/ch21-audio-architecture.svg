<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 500" width="600" height="500">
  <defs>
    <linearGradient id="appGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#357ABD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#5CB85C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#449D44;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="socketGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#D9534F;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C9302C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9B59B6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8E44AD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hwGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#34495E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2C3E50;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="600" height="500" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="300" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Linux Audio Architecture</text>

  <!-- Your Application -->
  <g filter="url(#shadow)">
    <rect x="75" y="55" width="450" height="60" rx="8" fill="url(#appGrad)"/>
  </g>
  <text x="300" y="82" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Your Application</text>
  <text x="300" y="100" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Game loop, Play() calls, procedural audio</text>

  <!-- Arrow 1 -->
  <line x1="300" y1="115" x2="300" y2="137" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Glow Audio Layer -->
  <g filter="url(#shadow)">
    <rect x="75" y="142" width="450" height="70" rx="8" fill="url(#apiGrad)"/>
  </g>
  <text x="300" y="170" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Glow Audio Layer</text>
  <text x="300" y="190" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">TagBuilder, Connection, Stream (internal/pulse/)</text>

  <!-- Arrow 2 -->
  <line x1="300" y1="212" x2="300" y2="234" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Unix Domain Socket -->
  <g filter="url(#shadow)">
    <rect x="75" y="239" width="450" height="55" rx="8" fill="url(#socketGrad)"/>
  </g>
  <text x="300" y="264" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Unix Domain Socket</text>
  <text x="300" y="282" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">$XDG_RUNTIME_DIR/pulse/native</text>

  <!-- Arrow 3 -->
  <line x1="300" y1="294" x2="300" y2="316" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- PulseAudio Server -->
  <g filter="url(#shadow)">
    <rect x="75" y="321" width="450" height="60" rx="8" fill="url(#serverGrad)"/>
  </g>
  <text x="300" y="348" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">PulseAudio / PipeWire</text>
  <text x="300" y="368" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Mixing, routing, per-app volume control</text>

  <!-- Arrow 4 -->
  <line x1="300" y1="381" x2="300" y2="403" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Hardware -->
  <g filter="url(#shadow)">
    <rect x="75" y="408" width="450" height="60" rx="8" fill="url(#hwGrad)"/>
  </g>
  <text x="300" y="435" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Sound Card / Speakers</text>
  <text x="300" y="453" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">ALSA kernel driver</text>

  <!-- Side labels -->
  <text x="545" y="88" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">Go code</text>
  <text x="545" y="178" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">internal/pulse/</text>
  <text x="545" y="268" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">net.Dial()</text>
  <text x="545" y="352" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">System</text>
  <text x="545" y="440" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">Hardware</text>

  <!-- Legend line -->
  <line x1="535" y1="70" x2="535" y2="460" stroke="#DDD" stroke-width="1" stroke-dasharray="4,4"/>
</svg>
