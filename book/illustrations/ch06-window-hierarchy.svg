<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 400" width="700" height="400">
  <defs>
    <linearGradient id="rootGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2C3E50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1A252F;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="appGrad1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#00ADD8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0095BD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="appGrad2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9B59B6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8E44AD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="widgetGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27AE60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E8449;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="700" height="400" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="350" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">X11 Window Hierarchy</text>

  <!-- Root Window -->
  <g transform="translate(275, 55)" filter="url(#shadow)">
    <rect x="0" y="0" width="150" height="50" rx="8" fill="url(#rootGrad)"/>
    <text x="75" y="25" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">Root Window</text>
    <text x="75" y="42" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">(Desktop)</text>
  </g>

  <!-- Connection lines from root -->
  <line x1="350" y1="105" x2="350" y2="130" stroke="#666" stroke-width="2"/>
  <line x1="150" y1="130" x2="550" y2="130" stroke="#666" stroke-width="2"/>
  <line x1="150" y1="130" x2="150" y2="155" stroke="#666" stroke-width="2"/>
  <line x1="350" y1="130" x2="350" y2="155" stroke="#666" stroke-width="2"/>
  <line x1="550" y1="130" x2="550" y2="155" stroke="#666" stroke-width="2"/>

  <!-- App Window 1: Glow -->
  <g transform="translate(75, 155)" filter="url(#shadow)">
    <rect x="0" y="0" width="150" height="60" rx="6" fill="url(#appGrad1)"/>
    <text x="75" y="25" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Your App</text>
    <text x="75" y="42" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.8)">Glow Window</text>
  </g>

  <!-- App Window 2: Browser -->
  <g transform="translate(275, 155)" filter="url(#shadow)">
    <rect x="0" y="0" width="150" height="60" rx="6" fill="url(#appGrad2)"/>
    <text x="75" y="25" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Browser</text>
    <text x="75" y="42" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.8)">Firefox</text>
  </g>

  <!-- App Window 3: Terminal -->
  <g transform="translate(475, 155)" filter="url(#shadow)">
    <rect x="0" y="0" width="150" height="60" rx="6" fill="url(#appGrad1)" fill-opacity="0.8"/>
    <text x="75" y="25" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Terminal</text>
    <text x="75" y="42" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.8)">xterm</text>
  </g>

  <!-- Browser child windows -->
  <line x1="350" y1="215" x2="350" y2="240" stroke="#666" stroke-width="2"/>
  <line x1="280" y1="240" x2="420" y2="240" stroke="#666" stroke-width="2"/>
  <line x1="280" y1="240" x2="280" y2="260" stroke="#666" stroke-width="2"/>
  <line x1="350" y1="240" x2="350" y2="260" stroke="#666" stroke-width="2"/>
  <line x1="420" y1="240" x2="420" y2="260" stroke="#666" stroke-width="2"/>

  <!-- Browser widgets -->
  <g transform="translate(235, 260)" filter="url(#shadow)">
    <rect x="0" y="0" width="90" height="40" rx="4" fill="url(#widgetGrad)"/>
    <text x="45" y="25" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Toolbar</text>
  </g>

  <g transform="translate(305, 260)" filter="url(#shadow)">
    <rect x="0" y="0" width="90" height="40" rx="4" fill="url(#widgetGrad)" fill-opacity="0.8"/>
    <text x="45" y="25" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Content</text>
  </g>

  <g transform="translate(375, 260)" filter="url(#shadow)">
    <rect x="0" y="0" width="90" height="40" rx="4" fill="url(#widgetGrad)" fill-opacity="0.6"/>
    <text x="45" y="25" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">Scrollbar</text>
  </g>

  <!-- Legend -->
  <g transform="translate(50, 330)">
    <rect x="0" y="0" width="600" height="60" rx="6" fill="#ECF0F1" stroke="#BDC3C7"/>
    <text x="300" y="20" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">Window Lifecycle</text>

    <g transform="translate(30, 35)">
      <rect x="0" y="0" width="80" height="20" rx="3" fill="#E74C3C"/>
      <text x="40" y="14" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Create</text>
    </g>

    <text x="120" y="48" font-family="Arial, sans-serif" font-size="14" fill="#666">→</text>

    <g transform="translate(140, 35)">
      <rect x="0" y="0" width="80" height="20" rx="3" fill="#F39C12"/>
      <text x="40" y="14" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Map</text>
    </g>

    <text x="230" y="48" font-family="Arial, sans-serif" font-size="14" fill="#666">→</text>

    <g transform="translate(250, 35)">
      <rect x="0" y="0" width="80" height="20" rx="3" fill="#27AE60"/>
      <text x="40" y="14" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Visible</text>
    </g>

    <text x="340" y="48" font-family="Arial, sans-serif" font-size="14" fill="#666">→</text>

    <g transform="translate(360, 35)">
      <rect x="0" y="0" width="80" height="20" rx="3" fill="#3498DB"/>
      <text x="40" y="14" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Unmap</text>
    </g>

    <text x="450" y="48" font-family="Arial, sans-serif" font-size="14" fill="#666">→</text>

    <g transform="translate(470, 35)">
      <rect x="0" y="0" width="80" height="20" rx="3" fill="#9B59B6"/>
      <text x="40" y="14" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Destroy</text>
    </g>
  </g>
</svg>
