<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 750" width="700" height="750">
  <defs>
    <linearGradient id="appGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#357ABD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#5CB85C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#449D44;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="x11Grad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F0AD4E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EC971F;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="pulseGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#00ADD8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0095BD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="socketGradX" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#D9534F;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C9302C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="socketGradP" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E74C3C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C0392B;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="serverGradX" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9B59B6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8E44AD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="serverGradP" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8E44AD;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7D3C98;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hwGradX" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#34495E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2C3E50;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hwGradP" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2C3E50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1A252F;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="700" height="750" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="350" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Glow Architecture</text>

  <!-- Your Application (full width) -->
  <g filter="url(#shadow)">
    <rect x="75" y="60" width="550" height="70" rx="8" fill="url(#appGrad)"/>
  </g>
  <text x="350" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Your Application</text>
  <text x="350" y="112" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="rgba(255,255,255,0.9)">Game loop, drawing commands, event handling, audio playback</text>

  <!-- Arrow down to API -->
  <line x1="350" y1="130" x2="350" y2="155" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Public API (full width) -->
  <g filter="url(#shadow)">
    <rect x="75" y="160" width="550" height="70" rx="8" fill="url(#apiGrad)"/>
  </g>
  <text x="350" y="190" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Public API</text>
  <text x="350" y="212" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="rgba(255,255,255,0.9)">Window, Canvas, Color, Event, AudioContext, AudioPlayer</text>

  <!-- Split arrows -->
  <line x1="230" y1="230" x2="230" y2="265" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="470" y1="230" x2="470" y2="265" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Path labels -->
  <text x="230" y="255" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Graphics</text>
  <text x="470" y="255" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">Audio</text>

  <!-- LEFT PATH: X11 Graphics -->

  <!-- Internal X11 Layer -->
  <g filter="url(#shadow)">
    <rect x="75" y="270" width="310" height="80" rx="8" fill="url(#x11Grad)"/>
  </g>
  <text x="230" y="300" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Internal X11 Layer</text>
  <text x="230" y="318" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Connection, Protocol, Window</text>
  <text x="230" y="335" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Events, GC, Framebuffer</text>

  <!-- Arrow -->
  <line x1="230" y1="350" x2="230" y2="375" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Unix Socket (X11) -->
  <g filter="url(#shadow)">
    <rect x="75" y="380" width="310" height="55" rx="8" fill="url(#socketGradX)"/>
  </g>
  <text x="230" y="405" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Unix Domain Socket</text>
  <text x="230" y="423" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">/tmp/.X11-unix/X0</text>

  <!-- Arrow -->
  <line x1="230" y1="435" x2="230" y2="460" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- X11 Server -->
  <g filter="url(#shadow)">
    <rect x="75" y="465" width="310" height="60" rx="8" fill="url(#serverGradX)"/>
  </g>
  <text x="230" y="492" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">X11 Server</text>
  <text x="230" y="510" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Xorg / XWayland</text>

  <!-- Arrow -->
  <line x1="230" y1="525" x2="230" y2="550" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Display Hardware -->
  <g filter="url(#shadow)">
    <rect x="75" y="555" width="310" height="60" rx="8" fill="url(#hwGradX)"/>
  </g>
  <text x="230" y="582" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Display</text>
  <text x="230" y="600" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">GPU, Monitor</text>

  <!-- RIGHT PATH: PulseAudio -->

  <!-- Internal Pulse Layer -->
  <g filter="url(#shadow)">
    <rect x="415" y="270" width="210" height="80" rx="8" fill="url(#pulseGrad)"/>
  </g>
  <text x="520" y="300" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Internal Pulse Layer</text>
  <text x="520" y="318" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">TagBuilder, Connection</text>
  <text x="520" y="335" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Stream, Protocol</text>

  <!-- Arrow -->
  <line x1="520" y1="350" x2="520" y2="375" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Unix Socket (Pulse) -->
  <g filter="url(#shadow)">
    <rect x="415" y="380" width="210" height="55" rx="8" fill="url(#socketGradP)"/>
  </g>
  <text x="520" y="405" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Unix Socket</text>
  <text x="520" y="423" font-family="Consolas, monospace" font-size="8" text-anchor="middle" fill="rgba(255,255,255,0.9)">$XDG_RUNTIME_DIR/pulse/native</text>

  <!-- Arrow -->
  <line x1="520" y1="435" x2="520" y2="460" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- PA Server -->
  <g filter="url(#shadow)">
    <rect x="415" y="465" width="210" height="60" rx="8" fill="url(#serverGradP)"/>
  </g>
  <text x="520" y="492" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">PA / PipeWire</text>
  <text x="520" y="510" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Mixing, routing</text>

  <!-- Arrow -->
  <line x1="520" y1="525" x2="520" y2="550" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Speakers Hardware -->
  <g filter="url(#shadow)">
    <rect x="415" y="555" width="210" height="60" rx="8" fill="url(#hwGradP)"/>
  </g>
  <text x="520" y="582" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Speakers</text>
  <text x="520" y="600" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.9)">Sound Card, ALSA</text>

  <!-- Side labels -->
  <text x="645" y="95" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">Go code</text>
  <text x="645" y="195" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">glow.go</text>
  <text x="645" y="195" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">glow.go</text>
  <text x="645" y="310" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">internal/</text>
  <text x="645" y="410" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">net.Dial()</text>
  <text x="645" y="495" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">System</text>
  <text x="645" y="585" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="start">Hardware</text>

  <!-- Legend line -->
  <line x1="635" y1="75" x2="635" y2="610" stroke="#DDD" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Same technique note -->
  <g transform="translate(75, 640)">
    <rect x="0" y="0" width="550" height="35" rx="5" fill="#D5F5E3" stroke="#27AE60"/>
    <text x="275" y="22" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#1E8449">Same pattern: pure Go binary protocol over Unix sockets â€” no CGo, no external dependencies</text>
  </g>

  <!-- Dashed line between paths -->
  <line x1="393" y1="270" x2="393" y2="615" stroke="#DDD" stroke-width="1" stroke-dasharray="4,4"/>
</svg>
