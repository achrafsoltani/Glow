<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 380" width="700" height="380">
  <defs>
    <linearGradient id="appGrad18" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#00ADD8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0095BD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="serverGrad18" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9B59B6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8E44AD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="shmGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#27AE60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E8449;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="socketGrad18" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E74C3C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C0392B;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
    <marker id="arr18" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#E74C3C"/>
    </marker>
    <marker id="arr18g" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27AE60"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="700" height="380" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="350" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">PutImage vs MIT-SHM Performance</text>

  <!-- Standard PutImage section -->
  <g transform="translate(30, 55)">
    <text x="160" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#E74C3C">Standard PutImage (Slow)</text>

    <!-- App -->
    <g transform="translate(0, 20)" filter="url(#shadow)">
      <rect x="0" y="0" width="100" height="60" rx="6" fill="url(#appGrad18)"/>
      <text x="50" y="25" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Application</text>
      <text x="50" y="45" font-family="Consolas, monospace" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">1.9 MB</text>
    </g>

    <!-- Arrow 1 -->
    <line x1="100" y1="50" x2="135" y2="50" stroke="#E74C3C" stroke-width="2" marker-end="url(#arr18)"/>
    <text x="118" y="42" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#E74C3C">copy</text>

    <!-- Socket -->
    <g transform="translate(140, 20)" filter="url(#shadow)">
      <rect x="0" y="0" width="80" height="60" rx="6" fill="url(#socketGrad18)"/>
      <text x="40" y="25" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Socket</text>
      <text x="40" y="45" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">Buffer</text>
    </g>

    <!-- Arrow 2 -->
    <line x1="220" y1="50" x2="255" y2="50" stroke="#E74C3C" stroke-width="2" marker-end="url(#arr18)"/>
    <text x="238" y="42" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#E74C3C">copy</text>

    <!-- X Server -->
    <g transform="translate(260, 20)" filter="url(#shadow)">
      <rect x="0" y="0" width="100" height="60" rx="6" fill="url(#serverGrad18)"/>
      <text x="50" y="35" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">X Server</text>
    </g>

    <!-- Stats -->
    <rect x="0" y="90" width="360" height="35" rx="4" fill="#FDEDEC" stroke="#E74C3C"/>
    <text x="180" y="112" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#C0392B">60 FPS × 1.9 MB = 114 MB/sec through socket</text>
  </g>

  <!-- MIT-SHM section -->
  <g transform="translate(30, 210)">
    <text x="160" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#27AE60">MIT-SHM Shared Memory (Fast)</text>

    <!-- Shared Memory -->
    <g transform="translate(50, 20)" filter="url(#shadow)">
      <rect x="0" y="0" width="260" height="50" rx="6" fill="url(#shmGrad)"/>
      <text x="130" y="22" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">Shared Memory Region</text>
      <text x="130" y="40" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.8)">1.9 MB (mapped to both processes)</text>
    </g>

    <!-- App -->
    <g transform="translate(0, 85)" filter="url(#shadow)">
      <rect x="0" y="0" width="100" height="50" rx="6" fill="url(#appGrad18)"/>
      <text x="50" y="22" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Application</text>
      <text x="50" y="40" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">writes</text>
    </g>

    <!-- X Server -->
    <g transform="translate(260, 85)" filter="url(#shadow)">
      <rect x="0" y="0" width="100" height="50" rx="6" fill="url(#serverGrad18)"/>
      <text x="50" y="22" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">X Server</text>
      <text x="50" y="40" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">reads</text>
    </g>

    <!-- Arrows to shared memory -->
    <line x1="50" y1="105" x2="100" y2="70" stroke="#27AE60" stroke-width="2" marker-end="url(#arr18g)"/>
    <line x1="310" y1="85" x2="260" y2="70" stroke="#27AE60" stroke-width="2" marker-end="url(#arr18g)"/>

    <!-- Stats -->
    <rect x="0" y="145" width="360" height="35" rx="4" fill="#D5F5E3" stroke="#27AE60"/>
    <text x="180" y="167" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1E8449">Zero-copy! Only small request message (~20 bytes)</text>
  </g>

  <!-- Performance comparison -->
  <g transform="translate(420, 55)">
    <rect x="0" y="0" width="250" height="310" rx="8" fill="#ECF0F1" stroke="#BDC3C7"/>
    <text x="125" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Performance</text>

    <g transform="translate(15, 45)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#E74C3C">PutImage:</text>
      <text x="0" y="18" font-family="Consolas, monospace" font-size="10" fill="#666">~20-30 FPS at 800×600</text>
      <text x="0" y="34" font-family="Consolas, monospace" font-size="10" fill="#666">High CPU for memcpy</text>
      <text x="0" y="50" font-family="Consolas, monospace" font-size="10" fill="#666">Socket bottleneck</text>
    </g>

    <g transform="translate(15, 115)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#27AE60">MIT-SHM:</text>
      <text x="0" y="18" font-family="Consolas, monospace" font-size="10" fill="#666">200+ FPS at 800×600</text>
      <text x="0" y="34" font-family="Consolas, monospace" font-size="10" fill="#666">Minimal CPU overhead</text>
      <text x="0" y="50" font-family="Consolas, monospace" font-size="10" fill="#666">Direct memory access</text>
    </g>

    <line x1="15" y1="180" x2="220" y2="180" stroke="#BDC3C7"/>

    <g transform="translate(15, 195)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">Speedup: 5-10×</text>
      <text x="0" y="25" font-family="Arial, sans-serif" font-size="10" fill="#666">Best for:</text>
      <text x="0" y="42" font-family="Consolas, monospace" font-size="9" fill="#666">• Full-screen rendering</text>
      <text x="0" y="57" font-family="Consolas, monospace" font-size="9" fill="#666">• Games (60+ FPS)</text>
      <text x="0" y="72" font-family="Consolas, monospace" font-size="9" fill="#666">• Video playback</text>
      <text x="0" y="87" font-family="Consolas, monospace" font-size="9" fill="#666">• Real-time graphics</text>
    </g>
  </g>
</svg>
