<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 500" width="750" height="500">
  <defs>
    <linearGradient id="reqGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27AE60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E8449;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="replyGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498DB;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980B9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="eventGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E74C3C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C0392B;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="errorGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F39C12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D68910;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="750" height="500" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="375" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">X11 Protocol Message Types</text>

  <!-- Request -->
  <g transform="translate(50, 60)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#27AE60">1. Request (Client → Server)</text>

    <g transform="translate(0, 15)" filter="url(#shadow)">
      <rect x="0" y="0" width="80" height="45" rx="4" fill="url(#reqGrad)"/>
      <text x="40" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Opcode</text>
      <text x="40" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">1 byte</text>

      <rect x="80" y="0" width="80" height="45" rx="4" fill="url(#reqGrad)" fill-opacity="0.8"/>
      <text x="120" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Data</text>
      <text x="120" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">1 byte</text>

      <rect x="160" y="0" width="100" height="45" rx="4" fill="url(#reqGrad)" fill-opacity="0.6"/>
      <text x="210" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Length</text>
      <text x="210" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">2 bytes</text>

      <rect x="260" y="0" width="180" height="45" rx="4" fill="url(#reqGrad)" fill-opacity="0.4"/>
      <text x="350" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Request Data</text>
      <text x="350" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">Variable</text>
    </g>

    <text x="460" y="45" font-family="Arial, sans-serif" font-size="10" fill="#666">Examples: CreateWindow,</text>
    <text x="460" y="58" font-family="Arial, sans-serif" font-size="10" fill="#666">MapWindow, PutImage</text>
  </g>

  <!-- Reply -->
  <g transform="translate(50, 160)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#3498DB">2. Reply (Server → Client)</text>

    <g transform="translate(0, 15)" filter="url(#shadow)">
      <rect x="0" y="0" width="60" height="45" rx="4" fill="url(#replyGrad)"/>
      <text x="30" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">1</text>
      <text x="30" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">1 byte</text>

      <rect x="60" y="0" width="60" height="45" rx="4" fill="url(#replyGrad)" fill-opacity="0.8"/>
      <text x="90" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Data</text>
      <text x="90" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">1 byte</text>

      <rect x="120" y="0" width="80" height="45" rx="4" fill="url(#replyGrad)" fill-opacity="0.6"/>
      <text x="160" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Seq Num</text>
      <text x="160" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">2 bytes</text>

      <rect x="200" y="0" width="80" height="45" rx="4" fill="url(#replyGrad)" fill-opacity="0.5"/>
      <text x="240" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Length</text>
      <text x="240" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">4 bytes</text>

      <rect x="280" y="0" width="160" height="45" rx="4" fill="url(#replyGrad)" fill-opacity="0.3"/>
      <text x="360" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Reply Data</text>
      <text x="360" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">Variable</text>
    </g>

    <text x="460" y="45" font-family="Arial, sans-serif" font-size="10" fill="#666">First byte always = 1</text>
    <text x="460" y="58" font-family="Arial, sans-serif" font-size="10" fill="#666">Response to queries</text>
  </g>

  <!-- Event -->
  <g transform="translate(50, 260)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#E74C3C">3. Event (Server → Client)</text>

    <g transform="translate(0, 15)" filter="url(#shadow)">
      <rect x="0" y="0" width="80" height="45" rx="4" fill="url(#eventGrad)"/>
      <text x="40" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Type</text>
      <text x="40" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">1 byte</text>

      <rect x="80" y="0" width="360" height="45" rx="4" fill="url(#eventGrad)" fill-opacity="0.5"/>
      <text x="260" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Event Data</text>
      <text x="260" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">31 bytes (always 32 bytes total)</text>
    </g>

    <text x="460" y="45" font-family="Arial, sans-serif" font-size="10" fill="#666">Type: 2=KeyPress,</text>
    <text x="460" y="58" font-family="Arial, sans-serif" font-size="10" fill="#666">4=ButtonPress, 12=Expose...</text>
  </g>

  <!-- Error -->
  <g transform="translate(50, 360)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#F39C12">4. Error (Server → Client)</text>

    <g transform="translate(0, 15)" filter="url(#shadow)">
      <rect x="0" y="0" width="60" height="45" rx="4" fill="url(#errorGrad)"/>
      <text x="30" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">0</text>
      <text x="30" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">1 byte</text>

      <rect x="60" y="0" width="70" height="45" rx="4" fill="url(#errorGrad)" fill-opacity="0.8"/>
      <text x="95" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Code</text>
      <text x="95" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">1 byte</text>

      <rect x="130" y="0" width="80" height="45" rx="4" fill="url(#errorGrad)" fill-opacity="0.6"/>
      <text x="170" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Seq Num</text>
      <text x="170" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">2 bytes</text>

      <rect x="210" y="0" width="90" height="45" rx="4" fill="url(#errorGrad)" fill-opacity="0.5"/>
      <text x="255" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Bad Value</text>
      <text x="255" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">4 bytes</text>

      <rect x="300" y="0" width="140" height="45" rx="4" fill="url(#errorGrad)" fill-opacity="0.3"/>
      <text x="370" y="20" font-family="Consolas, monospace" font-size="10" text-anchor="middle" fill="white">Opcodes + Extra</text>
      <text x="370" y="35" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.7)">~24 bytes</text>
    </g>

    <text x="460" y="45" font-family="Arial, sans-serif" font-size="10" fill="#666">First byte always = 0</text>
    <text x="460" y="58" font-family="Arial, sans-serif" font-size="10" fill="#666">Identifies failed request</text>
  </g>

  <!-- First byte decision tree -->
  <g transform="translate(50, 455)">
    <rect x="0" y="0" width="650" height="35" rx="5" fill="#ECF0F1" stroke="#BDC3C7"/>
    <text x="15" y="22" font-family="Consolas, monospace" font-size="11" fill="#2C3E50">
      First byte: 0 → Error | 1 → Reply | 2+ → Event (type = byte and 0x7F)
    </text>
  </g>
</svg>